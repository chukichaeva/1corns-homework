# Типы базы данных
* Создание ассортимента мебели - документо-ориентированная база данных, т.к. может хранить информацию в виде иерархических структур данных. Такой тип подходит для объектов с произвольным набором атрибутов и позводит нам не разбивать на данные на несколько взаимосвязанных таблиц в реляционной БД, а хранить их в виде целостной сущности. Можем использовать Mongo DB, хранить файлы в виде json. Т.к. прирост данных (единиц товара) довольно редкое явление - не на ежедневной основе, то использование данного типа базы данных оправдано.
* Сайт - реляционная БД, т.к. есть необходимость соответствия базы данных требованиям ACID. Требуется уменьшить вероятность неожиданного поведения системы и обеспечить целостность базы данных. Ожидается большой возможный прирост данных в месяц, что приводит к необходимости масштабирования. Данные храним в виде таблиц, индексируем по ID клиента (уникальный ключ) и ID продукта (содержит несколько единиц товара).
* Складская система - ключ-значение, т.к. данные могут быть представлены как коллекция с разными полями для записей, что позволит уменьшить количество памяти для хранения записи и увеличить производительность. 
* Система доставки - реляционная БД, т.к. для склада данные достаточно структурированы и их формат может быть задан уже на этапе проектирвоания хранилища.

Все сайты будут обращаться к одной базу данных с ценами. Складская система значет количество единиц товара, а цена на товар прописывается в единой базе данных с продуктами (как свойство единицы товара). При добавлении товара в корзину миддл-бэк сайта может запросить по ID товара его стоимость и самостоятельно рассчитать общую сумму покупки.
![alt tag](https://github.com/chukichaeva/1corns-homework/blob/main/img/erd.PNG)

Для синхронизации данных требуется добавить сервис "Покупки". Он обращается к сервису Складской системы и узнает количество, затем рассчитывает стоимость на основе данных из сервиса Продукты. Выбор товара должне производиться согласно следующей логике:
![alt tag](https://github.com/chukichaeva/1corns-homework/blob/main/img/descision.PNG)

Вариант 1. Клиент делает заказ на 20 штук. На складах 10 - 5 - 8 единиц товара
![alt tag](https://github.com/chukichaeva/1corns-homework/blob/main/img/10_5_8.PNG)
Риски и последствия: 
* клиент №2 не купит товар и за N минут пойдет искать товар на другом сайте
* при этом клиент №1 закупает довольно большую партию, можем считать такого клиента более лояльным и заинтересованным, раз он дошел до этапа оплаты (указал телефон\адрес\ФИО) 
* клиент №1 не оплатит товар и захочет повторно оформить заказ из корзины, но необходимого товара не окажется

Вариант 2. Клиент делает заказ на 20 штук. На складах 10 - 5 - 2 единиц товара
![alt tag](https://github.com/chukichaeva/1corns-homework/blob/main/img/10_3_2.PNG)
Риски и последствия: 
* клиент может купить часть товара, а остальное количество купить позже
* клиент может не купить товар совсем и пойти искать на другом сайте
* клиент может купить часть товара и не покупать остальное количество (найдет недостающее количество в виде аналога на другом источнике)
* клиент может оставить заявку на полное количество, а мы можем на основе общего wish-листа получать обратную связть для производства \ либо добавить опцию делать на заказ
